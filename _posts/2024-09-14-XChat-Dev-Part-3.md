---
title: "XChat рЃЊрЃћрЃЋрЃћрЃџрЃЮрЃърЃЏрЃћрЃюрЃбрЃў Part #3"
date: 2024-09-14 23:24:00 +0400
categories: [Programming]
tags: [Coding]
---

## рЃЎрЃџрЃўрЃћрЃюрЃбрЃўрЃА рЃЏрЃўрЃдрЃћрЃЉрЃљ/рЃЊрЃљрЃърЃарЃЮрЃфрЃћрЃАрЃћрЃЉрЃљ

рЃЊрЃарЃЮ рЃЏрЃЮрЃЋрЃўрЃЊрЃљ рЃЎрЃџрЃўрЃћрЃюрЃбрЃћрЃЉрЃў рЃЏрЃўрЃЋрЃўрЃдрЃЮ рЃАрЃћрЃарЃЋрЃћрЃарЃўрЃЌ. рЃАрЃљрЃюрЃљрЃЏ `OpenSSL`-рЃА рЃњрЃљрЃЏрЃЮрЃЋрЃўрЃДрЃћрЃюрЃћрЃЉ, рЃбрЃарЃљрЃцрЃўрЃЎрЃў рЃЊрЃљрЃБрЃерЃўрЃцрЃарЃљрЃЋрЃў рЃўрЃЦрЃюрЃћрЃЉрЃљ, рЃЏрЃљрЃњрЃарЃљрЃЏ рЃарЃЮрЃЊрЃћрЃАрЃљрЃф рЃЏрЃЌрЃљрЃЋрЃљрЃа рЃџрЃЮрЃњрЃўрЃЎрЃљрЃА рЃЏрЃЮрЃЋрЃарЃЕрЃћрЃЉрЃў рЃЏрЃљрЃА рЃљрЃБрЃфрЃўрЃџрЃћрЃЉрЃџрЃљрЃЊ рЃЊрЃљрЃЋрЃљрЃЏрЃљрЃбрЃћрЃЉ рЃЎрЃЮрЃЊрЃерЃў. рЃљрЃАрЃћрЃЋрЃћ рЃљрЃАрЃљрЃгрЃДрЃЮрЃЉрЃўрЃљ TUI рЃўрЃюрЃбрЃћрЃарЃцрЃћрЃўрЃАрЃў `ncurses.h` рЃЉрЃўрЃЉрЃџрЃўрЃЮрЃЌрЃћрЃЎрЃўрЃА рЃЊрЃљрЃ«рЃЏрЃљрЃарЃћрЃЉрЃўрЃЌ.

рЃ»рЃћрЃарЃ»рЃћрЃарЃЮрЃЉрЃўрЃЌ рЃДрЃБрЃарЃљрЃЊрЃдрЃћрЃЉрЃљрЃА рЃЏрЃљрЃўрЃюрЃф рЃЎрЃџрЃўрЃћрЃюрЃбрЃўрЃАрЃљрЃЊрЃљ рЃАрЃћрЃарЃЋрЃћрЃарЃўрЃА рЃЎрЃЮрЃЏрЃБрЃюрЃўрЃЎрЃљрЃфрЃўрЃљрЃќрЃћ рЃњрЃљрЃЋрЃљрЃЏрЃљрЃ«рЃЋрЃўрЃџрЃћрЃЉ. рЃЏрЃЮрЃЎрЃџрЃћрЃЊ, `server.hpp` рЃцрЃљрЃўрЃџрЃерЃў рЃБрЃюрЃЊрЃљ рЃерЃћрЃўрЃЦрЃЏрЃюрЃљрЃА `HandleClient()` рЃЊрЃљ `ReadFromClient()` рЃцрЃБрЃюрЃЦрЃфрЃўрЃћрЃЉрЃў:

```cpp
int ReadFromClient(int client_fd, sockaddr_in server_address, char* &recv_message_buffer){
    return 0;
}

int HandleClient(int server_socket, sockaddr_in server_address, std::vector<Client> client_vector){
    return 0;
}
```

рЃљрЃЦ рЃЏрЃЌрЃљрЃЋрЃљрЃарЃў `HandleClient` рЃцрЃБрЃюрЃЦрЃфрЃўрЃљрЃљ. рЃЏрЃљрЃњрЃарЃљрЃЏ рЃАрЃљрЃюрЃљрЃЏ рЃљрЃЏ рЃцрЃБрЃюрЃЦрЃфрЃўрЃљрЃА рЃњрЃљрЃЋрЃБрЃерЃЋрЃћрЃЉ, рЃАрЃљрЃГрЃўрЃарЃЮрЃљ рЃЏрЃЌрЃљрЃЋрЃљрЃа рЃцрЃБрЃюрЃЦрЃфрЃўрЃљрЃерЃў рЃерЃћрЃЏрЃЮрЃгрЃЏрЃЊрЃћрЃА рЃерЃћрЃАрЃљрЃФрЃџрЃћрЃЉрЃћрЃџрЃўрЃљ рЃЌрЃБ рЃљрЃарЃљ рЃљрЃ«рЃљрЃџрЃў рЃЎрЃџрЃўрЃћрЃюрЃбрЃўрЃА рЃЏрЃўрЃдрЃћрЃЉрЃљ рЃЊрЃљ рЃљрЃЏрЃўрЃАрЃЊрЃљ рЃЏрЃўрЃ«рЃћрЃЊрЃЋрЃўрЃЌ рЃБрЃюрЃЊрЃљ рЃЏрЃўрЃЋрЃўрЃдрЃЮ рЃерЃћрЃАрЃљрЃЉрЃљрЃЏрЃўрЃАрЃў рЃќрЃЮрЃЏрЃћрЃЉрЃў:

```cpp
while(true == true){
    if(client_vector.size() >= 200){
        sockaddr_in client_address;
        socklen_t szof_client_address = sizeof(client_address);
        int client_fd = accept(server_socket, reinterpret_cast<sockaddr*>(&client_address), &szof_client_address);
            
        char data_buffer[NICKNAME_BUFFER_SIZE];

        int received_bytes = recv(client_fd, data_buffer, NICKNAME_BUFFER_SIZE - 1, 0);

        if(received_bytes < 0){
            Log((char*)"Couldn't receive nickname from the client", 1, false);
            close(client_fd);
        }
        else if(received_bytes == 0){
            Log((char*)"Client disconnected", 1, false);
            close(client_fd);
        }
        else{
            data_buffer[received_bytes] = '\0';
            char data_send_buffer[SPEC_CODE_BUFFER_SIZE];

            send(client_fd, data_send_buffer, SPEC_CODE_BUFFER_SIZE, 0);
            close(client_fd);
        }
    }
    else{
        std::thread handle_client_thread(HandleClient, server_socket, server_address);
    }
}
```

рЃћрЃА рЃЎрЃЮрЃЊрЃўрЃА рЃюрЃљрЃгрЃўрЃџрЃў рЃерЃћрЃљрЃЏрЃЮрЃгрЃЏрЃћрЃЉрЃА рЃАрЃљрЃЋрЃАрЃћрЃљ рЃЌрЃБ рЃљрЃарЃљ рЃЎрЃџрЃўрЃћрЃюрЃбрЃЌрЃљ рЃАрЃўрЃљ рЃЊрЃљ рЃўрЃЏрЃўрЃА рЃЏрЃўрЃ«рЃћрЃЊрЃЋрЃўрЃЌ рЃЏрЃўрЃўрЃдрЃћрЃЉрЃА рЃњрЃљрЃЊрЃљрЃгрЃДрЃЋрЃћрЃбрЃўрЃџрЃћрЃЉрЃљрЃА.

## рЃерЃћрЃфрЃЊрЃЮрЃЏрЃћрЃЉрЃўрЃА рЃњрЃљрЃАрЃгрЃЮрЃарЃћрЃЉрЃљ?!

рЃЎрЃЮрЃЊрЃў рЃњрЃљрЃЊрЃљрЃЋрЃљрЃЎрЃЮрЃЏрЃърЃўрЃџрЃўрЃарЃћ рЃЊрЃљ рЃўрЃЏрЃБрЃерЃљрЃЋрЃљ, рЃЏрЃљрЃњрЃарЃљрЃЏ Runtime-рЃерЃў рЃЏрЃЦрЃЮрЃюрЃЊрЃљ рЃљрЃАрЃћрЃЌрЃў рЃърЃарЃЮрЃЉрЃџрЃћрЃЏрЃљ:
![1.png](https://44b4c0.github.io/assets/img/posts/3/1.png)

рЃЉрЃћрЃЋрЃарЃў рЃЋрЃўрЃцрЃўрЃЦрЃарЃћ рЃЊрЃљ рЃЊрЃўрЃЊрЃў рЃ«рЃљрЃюрЃў рЃЋрЃўрЃДрЃљрЃЋрЃў рЃљрЃЏрЃљрЃќрЃћ рЃњрЃљрЃГрЃћрЃЊрЃўрЃџрЃў. рЃЏрЃћрЃњрЃЮрЃюрЃљ, рЃарЃЮрЃЏ рЃЉрЃўрЃЉрЃџрЃўрЃЮрЃЌрЃћрЃЎрЃћрЃЉрЃерЃў рЃњрЃљрЃарЃЎрЃЋрЃћрЃБрЃџрЃў рЃцрЃБрЃюрЃЦрЃфрЃўрЃћрЃЉрЃў рЃАрЃгрЃЮрЃарЃљрЃЊ рЃљрЃа рЃЏрЃБрЃерЃљрЃЮрЃЉрЃЊрЃљ рЃЊрЃљ рЃЏрЃљрЃњрЃўрЃбрЃЮрЃЏ рЃ«рЃЊрЃћрЃЉрЃЮрЃЊрЃљ рЃћрЃА, рЃЏрЃљрЃњрЃарЃљрЃЏ рЃерЃћрЃЏрЃЊрЃћрЃњ рЃЏрЃўрЃЋрЃ«рЃЋрЃЊрЃў, рЃарЃЮрЃЏ рЃЎрЃЮрЃЊрЃўрЃА рЃџрЃЮрЃњрЃўрЃЎрЃљрЃљ рЃљрЃарЃћрЃБрЃџрЃў. рЃАрЃљрЃЦрЃЏрЃћ рЃўрЃАрЃљрЃљ, рЃарЃЮрЃЏ рЃърЃарЃЮрЃњрЃарЃљрЃЏрЃљ рЃБрЃАрЃљрЃАрЃарЃБрЃџрЃЮрЃЊ рЃљрЃЏрЃЮрЃгрЃЏрЃћрЃЉрЃА `client_vector` рЃЋрЃћрЃЦрЃбрЃЮрЃарЃА рЃЊрЃљ рЃЌрЃБ рЃўрЃА рЃАрЃљрЃЋрЃАрЃћ рЃљрЃарЃљрЃљ, рЃЏрЃљрЃерЃўрЃю рЃўрЃА рЃљрЃ«рЃљрЃџ рЃгрЃарЃћрЃЊрЃА рЃЦрЃЏрЃюрЃўрЃА. рЃњрЃљрЃЏрЃЮрЃЊрЃўрЃА, рЃарЃЮрЃЏ рЃБрЃАрЃљрЃАрЃарЃБрЃџрЃЮрЃЊ рЃЉрЃћрЃЋрЃарЃў рЃгрЃарЃћрЃЊрЃў рЃўрЃЦрЃЏрЃюрЃћрЃЉрЃљ рЃЊрЃљ рЃљрЃЏрЃўрЃА рЃњрЃљрЃЏрЃЮ рЃЎрЃћрЃарЃюрЃћрЃџрЃў рЃърЃарЃЮрЃфрЃћрЃАрЃА рЃЏрЃўрЃЎрЃџрЃљрЃЋрЃА, рЃўрЃЏрЃўрЃАрЃЌрЃЋрЃўрЃА, рЃарЃЮрЃЏ рЃарЃљрЃдрЃљрЃф рЃърЃарЃЮрЃЉрЃџрЃћрЃЏрЃљ рЃљрЃа рЃерЃћрЃћрЃЦрЃЏрЃюрЃљрЃА рЃЮрЃърЃћрЃарЃљрЃфрЃўрЃБрЃџ рЃАрЃўрЃАрЃбрЃћрЃЏрЃљрЃА. рЃљрЃЦрЃћрЃЊрЃљрЃю рЃњрЃљрЃЏрЃЮрЃЏрЃЊрЃўрЃюрЃљрЃарЃћ рЃАрЃљрЃГрЃўрЃарЃЮрЃљ рЃљрЃЏ рЃърЃарЃЮрЃЉрЃџрЃћрЃЏрЃўрЃА рЃњрЃљрЃЏрЃЮрЃАрЃгрЃЮрЃарЃћрЃЉрЃљ:

```cpp
while(true == true){
    if(client_vector.size() >= 200){
        sockaddr_in client_address;
        socklen_t szof_client_address = sizeof(client_address);
        int client_fd = accept(server_socket, reinterpret_cast<sockaddr*>(&client_address), &szof_client_address);

        if(client_fd < 0){
            Log((char*)"Unable to accept client", 2, false);
        }
            
        char data_buffer[USERNAME_BUFFER_SIZE];

        int received_bytes = recv(client_fd, data_buffer, USERNAME_BUFFER_SIZE - 1, 0);

        if(received_bytes < 0){
            Log((char*)"Couldn't receive nickname from the client", 1, false);
            close(client_fd);
        }
        else if(received_bytes == 0){
            Log((char*)"Client disconnected", 1, false);
            close(client_fd);
        }
        else{
            data_buffer[received_bytes] = '\0';
            char data_send_buffer[SPEC_CODE_BUFFER_SIZE];

            send(client_fd, data_send_buffer, SPEC_CODE_BUFFER_SIZE, 0);
            close(client_fd);
        }
    }
    else{
        sockaddr_in client_address;
        socklen_t szof_client_address = sizeof(client_address);
        int client_fd = accept(server_socket, reinterpret_cast<sockaddr*>(&client_address), &szof_client_address);

        char username_buffer[USERNAME_BUFFER_SIZE];

        Client new_client;
        new_client.client_fd = client_fd;
        new_client.username = username_buffer;
        new_client.ip_address = inet_ntoa(client_address.sin_addr);
        new_client.port = ntohs(client_address.sin_port);

        client_vector.push_back(new_client);

        std::thread handle_client_thread(HandleClient, server_socket, server_address);
    }
}
```

рЃљрЃАрЃћрЃЋрЃћ `server.hpp` рЃцрЃљрЃўрЃџрЃерЃў рЃЏрЃЮрЃЏрЃўрЃгрЃўрЃљ рЃцрЃБрЃюрЃЦрЃфрЃўрЃћрЃЉрЃўрЃА рЃЕрЃљрЃАрЃгрЃЮрЃарЃћрЃЉрЃљ:

```cpp
int ReadFromClient(int client_fd, sockaddr_in server_address, char* &recv_message_buffer){
    return 0;
}

int HandleClient(int client_fd, sockaddr_in server_address){
    return 0;
}
```

рЃерЃћрЃЊрЃљрЃарЃћрЃЉрЃўрЃЌ рЃЎрЃљрЃарЃњрЃў рЃљрЃдрЃгрЃћрЃарЃўрЃАрЃЌрЃЋрЃўрЃА, `NICKNAME_BUFFER_SIZE` рЃерЃћрЃЋрЃфрЃЋрЃљрЃџрЃћ `USERNAME_BUFFER_SIZE`-рЃўрЃЌ. рЃЏрЃљрЃњрЃарЃљрЃЏ рЃљрЃЏ рЃЏрЃ«рЃарЃўрЃЋ рЃДрЃЋрЃћрЃџрЃљрЃцрЃћрЃарЃў рЃўрЃњрЃўрЃЋрЃћ рЃарЃЕрЃћрЃЉрЃљ рЃАрЃљрЃ«рЃћрЃџрЃўрЃА рЃњрЃљрЃарЃЊрЃљ.

рЃарЃћрЃЎрЃЮрЃЏрЃърЃўрЃџрЃљрЃфрЃўрЃўрЃА рЃерЃћрЃЏрЃЊрЃћрЃњ, рЃАрЃћрЃарЃЋрЃћрЃарЃў рЃњрЃљрЃЏрЃљрЃарЃЌрЃБрЃџрЃљрЃЊ рЃЏрЃБрЃерЃљрЃЮрЃЉрЃА. рЃЌрЃћрЃЮрЃарЃўрЃБрЃџрЃљрЃЊ, рЃљрЃ«рЃџрЃљ рЃљрЃдрЃљрЃарЃф `Thread pool`-рЃўрЃА рЃЊрЃљрЃгрЃћрЃарЃљ рЃЏрЃЮрЃЏрЃўрЃгрЃћрЃЋрЃА рЃЊрЃљ рЃљрЃдрЃљрЃарЃф рЃ«рЃћрЃџрЃўрЃЌ рЃЏрЃЮрЃЏрЃўрЃгрЃћрЃЋрЃА `Thread vector`-рЃўрЃА рЃњрЃљрЃгрЃћрЃарЃљ, рЃарЃЮрЃЏрЃџрЃўрЃА рЃЎрЃЮрЃюрЃбрЃарЃЮрЃџрЃўрЃф рЃњрЃљрЃюрЃфрЃљрЃџрЃЎрЃћрЃЋрЃћрЃЉрЃБрЃџрЃў `thread`-рЃЊрЃљрЃю рЃЏрЃЮрЃЏрЃўрЃгрЃћрЃЋрЃА.

рЃљрЃ«рЃџрЃљ рЃћрЃарЃЌрЃљрЃЊрЃћрЃарЃЌ рЃњрЃљрЃЏрЃЮрЃгрЃЋрЃћрЃЋрЃљрЃЊ рЃарЃЕрЃћрЃЉрЃљ рЃўрЃАрЃћрЃЌрЃў рЃарЃљрЃЏрЃўрЃА рЃЏрЃЮрЃцрЃўрЃЦрЃарЃћрЃЉрЃљ, рЃарЃљрЃф `client_vector`-рЃА рЃњрЃљрЃгрЃЏрЃћрЃюрЃЊрЃА. рЃњрЃљрЃгрЃЏрЃћрЃюрЃЊрЃљ рЃўрЃЏрЃўрЃбрЃЮрЃЏрЃљрЃљ рЃАрЃљрЃГрЃўрЃарЃЮ, рЃарЃЮрЃЏ рЃўрЃАрЃћрЃЌрЃў рЃЎрЃџрЃўрЃћрЃюрЃбрЃћрЃЉрЃў(рЃЏрЃљрЃЌрЃў рЃЮрЃЉрЃўрЃћрЃЦрЃбрЃћрЃЉрЃў) рЃЏрЃЮрЃЋрЃљрЃерЃЮрЃарЃЮ рЃАрЃћрЃарЃЋрЃћрЃарЃўрЃА рЃЋрЃћрЃЦрЃбрЃЮрЃарЃА рЃЌрЃљрЃЋрЃўрЃЊрЃљрЃю, рЃарЃЮрЃЏрЃџрЃћрЃЉрЃЏрЃљрЃф рЃАрЃўрЃАрЃбрЃћрЃЏрЃљрЃАрЃЌрЃљрЃю рЃњрЃљрЃгрЃДрЃЋрЃўрЃбрЃћрЃА рЃЎрЃљрЃЋрЃерЃўрЃарЃў. рЃЏрЃАрЃњрЃљрЃЋрЃАрЃў рЃарЃљрЃЏ рЃЊрЃљрЃАрЃљрЃерЃЋрЃћрЃЉрЃўрЃљ. рЃерЃћрЃАрЃљрЃФрЃџрЃЮрЃљ рЃЎрЃџрЃўрЃћрЃюрЃбрЃћрЃЉрЃўрЃА рЃЋрЃћрЃЦрЃбрЃЮрЃарЃў рЃњрЃљрЃЊрЃљрЃЋрЃљрЃгрЃЮрЃЊрЃЮ рЃЮрЃарЃўрЃЋрЃћ рЃцрЃБрЃюрЃЦрЃфрЃўрЃљрЃА рЃЊрЃљ рЃЌрЃљрЃюрЃЏрЃўрЃЏрЃЊрЃћрЃЋрЃарЃБрЃџрЃљрЃЊ рЃерЃћрЃЋрЃљрЃЏрЃЮрЃгрЃЏрЃЮ рЃЌрЃўрЃЌрЃЮрЃћрЃБрЃџрЃў рЃЋрЃћрЃЦрЃбрЃЮрЃарЃўрЃА рЃгрЃћрЃЋрЃарЃў.

> **­ЪЊЮ рЃАрЃљрЃўрЃюрЃбрЃћрЃарЃћрЃАрЃЮ рЃцрЃљрЃЦрЃбрЃў:**  
> `for` рЃфрЃўрЃЎрЃџрЃўрЃЌ рЃерЃћрЃАрЃљрЃФрЃџрЃћрЃЉрЃћрЃџрЃўрЃљ рЃЏрЃљрЃАрЃўрЃЋрЃерЃў, рЃЋрЃћрЃЦрЃбрЃЮрЃарЃерЃў, рЃАрЃўрЃљрЃерЃў рЃљрЃарЃАрЃћрЃЉрЃБрЃџрЃў рЃюрЃўрЃЋрЃЌрЃћрЃЉрЃўрЃА рЃњрЃљрЃЊрЃљрЃЏрЃЮрЃгрЃЏрЃћрЃЉрЃљ. рЃљрЃюрЃБ, рЃерЃћрЃАрЃљрЃФрЃџрЃћрЃЉрЃћрЃџрЃўрЃљ рЃЌрЃўрЃЌрЃЮрЃћрЃБрЃџрЃў рЃюрЃўрЃЋрЃЌрЃўрЃА рЃАрЃљрЃЌрЃўрЃЌрЃљрЃЮрЃЊ рЃерЃћрЃЏрЃЮрЃгрЃЏрЃћрЃЉрЃљ. рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃљрЃЊ, рЃърЃўрЃЌрЃЮрЃюрЃА рЃљрЃЦрЃЋрЃА рЃљрЃАрЃћрЃЌрЃў рЃ«рЃћрЃарЃ«рЃў: `for client in clients:` рЃЊрЃљ рЃљрЃЏрЃўрЃА рЃерЃћрЃЏрЃЊрЃћрЃњ `client` рЃ«рЃЊрЃћрЃЉрЃљ рЃЮрЃЉрЃўрЃћрЃЦрЃбрЃў, рЃарЃЮрЃЏрЃћрЃџрЃќрЃћ рЃЏрЃБрЃерЃљрЃЮрЃЉрЃљрЃф рЃерЃћрЃњрЃЋрЃўрЃФрЃџрЃўрЃљ. рЃћрЃА рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃў рЃљрЃЏ рЃАрЃћрЃарЃўрЃўрЃА рЃърЃўрЃарЃЋрЃћрЃџ рЃърЃЮрЃАрЃбрЃерЃўрЃљ рЃЏрЃЮрЃДрЃЋрЃљрЃюрЃўрЃџрЃў, рЃАрЃљрЃЊрЃљрЃф рЃЕрЃћрЃЏрЃў рЃФрЃЋрЃћрЃџрЃў рЃарЃћрЃърЃЮрЃќрЃўрЃбрЃЮрЃарЃўрЃўрЃЊрЃљрЃю рЃгрЃљрЃЏрЃЮрЃдрЃћрЃЉрЃБрЃџрЃў рЃърЃўрЃЌрЃЮрЃюрЃерЃў рЃЊрЃљрЃгрЃћрЃарЃўрЃџрЃў рЃърЃарЃЮрЃћрЃЦрЃбрЃў рЃњрЃљрЃюрЃЋрЃўрЃ«рЃўрЃџрЃћ: [XChat рЃЊрЃћрЃЋрЃћрЃџрЃЮрЃърЃЏрЃћрЃюрЃбрЃў рЃюрЃљрЃгрЃўрЃџрЃў #1](https://44b4c0.github.io/posts/XChat-Dev-Part-1/)

## рЃЎрЃўрЃЊрЃћрЃЋ рЃБрЃцрЃарЃЮ рЃЏрЃћрЃбрЃў рЃфрЃЋрЃџрЃўрЃџрЃћрЃЉрЃљ

рЃАрЃљрЃБрЃЎрЃћрЃЌрЃћрЃАрЃЮ рЃЋрЃљрЃарЃўрЃљрЃюрЃбрЃў рЃЏрЃљрЃўрЃюрЃф рЃљрЃ«рЃљрЃџрЃў рЃАрЃўрЃАрЃбрЃћрЃЏрЃљ рЃўрЃЦрЃюрЃћрЃЉрЃљ. рЃЏрЃ«рЃЮрЃџрЃЮрЃЊ рЃћрЃарЃЌрЃў рЃцрЃБрЃюрЃЦрЃфрЃўрЃљ рЃЊрЃљрЃЋрЃбрЃЮрЃЋрЃћ, `ReadFromClient()`, рЃарЃљрЃЊрЃњрЃљрЃю рЃЏрЃЌрЃљрЃЋрЃљрЃа рЃцрЃБрЃюрЃЦрЃфрЃўрЃљрЃерЃў рЃЋрЃљрЃЎрЃћрЃЌрЃћрЃЉ рЃљрЃ«рЃџрЃљ `HandleClient()` рЃцрЃБрЃюрЃЦрЃфрЃўрЃўрЃА рЃњрЃљрЃАрЃљрЃЎрЃћрЃЌрЃћрЃЉрЃћрЃџрЃА. рЃљрЃАрЃћрЃЋрЃћ рЃЉрЃћрЃЋрЃарЃў рЃАрЃљрЃўрЃюрЃбрЃћрЃарЃћрЃАрЃЮ рЃарЃљрЃЏ рЃЊрЃљрЃЋрЃљрЃЏрЃљрЃбрЃћ рЃцрЃБрЃюрЃЦрЃфрЃўрЃћрЃЉрЃА.

рЃћрЃА рЃљрЃарЃўрЃА рЃњрЃљрЃюрЃљрЃ«рЃџрЃћрЃЉрЃБрЃџрЃў рЃЎрЃЮрЃЊрЃўрЃА рЃюрЃљрЃгрЃўрЃџрЃў `main()` рЃцрЃБрЃюрЃЦрЃфрЃўрЃљрЃерЃў:
```cpp
while(true == true){
    if(client_vector.size() >= 200){
        sockaddr_in client_address;
        socklen_t szof_client_address = sizeof(client_address);
        int client_fd = accept(server_socket, reinterpret_cast<sockaddr*>(&client_address), &szof_client_address);

        if(client_fd < 0){
            Log((char*)"Unable to accept client", 2, false);
        }
            
        char data_buffer[USERNAME_BUFFER_SIZE];

        int received_bytes = recv(client_fd, data_buffer, USERNAME_BUFFER_SIZE - 1, 0);

        if(received_bytes < 0){
            Log((char*)"Couldn't receive nickname from the client", 1, false);
            close(client_fd);
        }
        else if(received_bytes == 0){
            Log((char*)"Client disconnected", 1, false);
            close(client_fd);
        }
        else{
            data_buffer[received_bytes] = '\0';
            char data_send_buffer[SPEC_CODE_BUFFER_SIZE];

            send(client_fd, data_send_buffer, SPEC_CODE_BUFFER_SIZE, 0);
            close(client_fd);
        }
    }
    else{
        sockaddr_in client_address;
        socklen_t szof_client_address = sizeof(client_address);
        int client_fd = accept(server_socket, reinterpret_cast<sockaddr*>(&client_address), &szof_client_address);

        char username_buffer[USERNAME_BUFFER_SIZE];

        Client new_client;
        new_client.client_fd = client_fd;
        new_client.username = username_buffer;
        new_client.ip_address = inet_ntoa(client_address.sin_addr);
        new_client.port = ntohs(client_address.sin_port);

        client_vector.push_back(new_client);

        std::thread handle_client_thread(ReadFromClient, client_fd, server_address, std::ref(client_vector));
    }
}
```

рЃерЃћрЃЏрЃЊрЃћрЃњ, `server.hpp` рЃцрЃљрЃўрЃџрЃўрЃЊрЃљрЃю, рЃарЃЮрЃњрЃЮрЃарЃф рЃБрЃЎрЃЋрЃћ рЃЋрЃЌрЃЦрЃЋрЃў, рЃгрЃљрЃЋрЃерЃљрЃџрЃћ `HandleClient()` рЃцрЃБрЃюрЃЦрЃфрЃўрЃљ рЃЊрЃљ рЃЏрЃ«рЃЮрЃџрЃЮрЃЊ `ReadFromClient()` рЃцрЃБрЃюрЃЦрЃфрЃўрЃљ рЃЊрЃљрЃЋрЃбрЃЮрЃЋрЃћ. рЃарЃљрЃф рЃюрЃўрЃерЃюрЃљрЃЋрЃА, рЃарЃЮрЃЏ рЃерЃћрЃЏрЃфрЃўрЃарЃЊрЃљ рЃћ.рЃг. `Code Base` рЃЊрЃљ рЃљрЃЏрЃўрЃЌ рЃДрЃЋрЃћрЃџрЃљрЃцрЃћрЃарЃў рЃЉрЃћрЃЋрЃарЃљрЃЊ рЃБрЃЎрЃћрЃЌрЃћрЃАрЃЮрЃЉрЃўрЃАрЃЎрЃћрЃю рЃгрЃљрЃЋрЃљ.

рЃљрЃў рЃћрЃА рЃфрЃЋрЃџрЃўрЃџрЃћрЃЉрЃћрЃЉрЃў рЃерЃћрЃЋрЃўрЃбрЃљрЃюрЃћ `server.hpp` рЃцрЃљрЃўрЃџрЃерЃў:
```cpp
void RemoveClient(std::vector<Client> client_vector, int client_fd){
    auto it = std::remove_if(client_vector.begin(), client_vector.end(),
    [client_fd](const Client& client) {
        return client.client_fd == client_fd;
    });
    client_vector.erase(it, client_vector.end());
}

int ReadFromClient(int client_fd, sockaddr_in server_address, std::vector<Client> client_vector){
    while(true == true){
        char message_buffer[MESSAGE_BUFFER_SIZE];
        int received_bytes = recv(client_fd, message_buffer, MESSAGE_BUFFER_SIZE - 1, 0);
    
        if(received_bytes < 0){
            Log((char*)"Unable to receive message from the client", 1, false);
            close(client_fd);
            break;
        }
        else if(received_bytes == 0){
            Log((char*)"Client disconnected", 1, false);
            close(client_fd);
            break;
        }
        else{
            message_buffer[received_bytes] = '\0';

            for(const auto& client : client_vector){
                if(client.client_fd != client_fd){
                    send(client.client_fd, message_buffer, MESSAGE_BUFFER_SIZE, 0);
                }
            }
        }
    }

    RemoveClient(std::ref(client_vector), client_fd);

    close(client_fd);

    return 0;
}
```

рЃърЃўрЃарЃЋрЃћрЃџрЃў рЃцрЃБрЃюрЃЦрЃфрЃўрЃљ, `RemoveClient()` рЃўрЃдрЃћрЃЉрЃА рЃЮрЃа рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃА рЃЊрЃљ `client_fd`-рЃќрЃћ рЃЊрЃљрЃДрЃарЃЊрЃюрЃЮрЃЉрЃўрЃЌ рЃљрЃерЃЮрЃарЃћрЃЉрЃА рЃЎрЃџрЃўрЃћрЃюрЃбрЃА рЃЋрЃћрЃЦрЃбрЃЮрЃарЃўрЃЊрЃљрЃю. рЃерЃћрЃАрЃљрЃФрЃџрЃЮрЃљ, рЃЏрЃЮрЃњрЃЋрЃўрЃљрЃюрЃћрЃЉрЃўрЃЌ, рЃћрЃА рЃЉрЃћрЃЋрЃарЃљрЃЊ рЃБрЃЎрЃћрЃЌрЃћрЃАрЃў рЃЋрЃљрЃарЃўрЃљрЃюрЃбрЃўрЃЌ рЃерЃћрЃЋрЃфрЃЋрЃљрЃџрЃЮ, рЃарЃЮрЃЏрЃћрЃџрЃўрЃф рЃЏрЃЮрЃЏрЃ«рЃЏрЃљрЃарЃћрЃЉрЃџрЃўрЃА `username`-рЃўрЃЌ рЃљрЃЏрЃЮрЃерЃџрЃљрЃА рЃўрЃЌрЃЋрЃљрЃџрЃўрЃАрЃгрЃўрЃюрЃћрЃЉрЃА.
