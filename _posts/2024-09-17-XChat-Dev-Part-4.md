---
title: "XChat development рЃюрЃљрЃгрЃўрЃџрЃў #4"
date: 2024-09-17 23:08:00 +0400
categories: [Programming]
tags: [Coding]
---

## TUI рЃўрЃюрЃбрЃћрЃарЃцрЃћрЃўрЃАрЃўрЃА рЃерЃћрЃюрЃћрЃЉрЃљ

рЃФрЃљрЃџрЃўрЃљрЃю рЃљрЃа рЃЏрЃўрЃДрЃЋрЃљрЃарЃА рЃћрЃА рЃърЃарЃЮрЃфрЃћрЃАрЃў, рЃарЃљрЃЊрЃњрЃљрЃю рЃњрЃарЃљрЃцрЃўрЃЎрЃљрЃАрЃЌрЃљрЃю рЃЏрЃБрЃерЃљрЃЮрЃЉрЃљ рЃљрЃарЃљрЃљ рЃАрЃљрЃАрЃўрЃљрЃЏрЃЮрЃЋрЃюрЃЮ, рЃЏрЃљрЃњрЃарЃљрЃЏ рЃЎрЃџрЃўрЃћрЃюрЃбрЃЏрЃљ рЃАрЃћрЃарЃЋрЃћрЃарЃЌрЃљрЃю рЃЎрЃЮрЃЏрЃБрЃюрЃўрЃЎрЃљрЃфрЃўрЃљ рЃЎрЃЮрЃЏрЃцрЃЮрЃарЃбрЃБрЃџрЃљрЃЊ рЃарЃЮрЃЏ рЃерЃћрЃФрЃџрЃЮрЃА, рЃЏрЃЮрЃЏрЃўрЃгрЃћрЃЋрЃА `TUI` рЃўрЃюрЃбрЃћрЃарЃцрЃћрЃўрЃАрЃўрЃА рЃљрЃерЃћрЃюрЃћрЃЉрЃљ.

рЃљрЃЏ рЃћрЃбрЃљрЃърЃќрЃћ рЃЉрЃарЃФрЃљрЃюрЃћрЃЉрЃћрЃЉрЃўрЃА рЃърЃљрЃарЃАрЃўрЃюрЃњрЃўрЃф рЃљрЃа рЃЏрЃљрЃўрЃюрЃбрЃћрЃарЃћрЃАрЃћрЃЉрЃА, рЃЏрЃЌрЃљрЃЋрЃљрЃарЃўрЃљ рЃЎрЃЮрЃЊрЃЏрЃљ рЃњрЃљрЃЏрЃљрЃарЃЌрЃБрЃџрЃљрЃЊ рЃўрЃЏрЃБрЃерЃљрЃЮрЃА. рЃљрЃАрЃћ, рЃарЃЮрЃЏ рЃЎрЃЮрЃЊрЃўрЃА рЃЊрЃўрЃЊрЃў рЃюрЃљрЃгрЃўрЃџрЃўрЃА рЃгрЃљрЃерЃџрЃљ рЃЏрЃЮрЃЏрЃўрЃгрЃћрЃЋрЃА(рЃЏрЃљрЃўрЃюрЃф рЃЊрЃљрЃБрЃЏрЃЌрЃљрЃЋрЃарЃћрЃЉрЃћрЃџрЃўрЃљ рЃЊрЃљ рЃљрЃа рЃЏрЃГрЃўрЃарЃЊрЃћрЃЉрЃљ), рЃарЃЮрЃЏрЃћрЃџрЃўрЃф рЃЌрЃўрЃЌрЃЦрЃЮрЃАрЃЊрЃљ рЃБрЃюрЃЊрЃљ рЃърЃљрЃарЃАрЃљрЃЋрЃЊрЃћрЃА рЃЏрЃЮрЃЏрЃ«рЃЏрЃљрЃарЃћрЃЉрЃџрЃўрЃА рЃЏрЃўрЃћрЃа рЃерЃћрЃДрЃЋрЃљрЃюрЃўрЃџ рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃћрЃЉрЃА. рЃћрЃарЃЌрЃљрЃЊрЃћрЃарЃЌрЃў рЃарЃљрЃф рЃЏрЃГрЃўрЃарЃЊрЃћрЃЉрЃљ, рЃљрЃарЃўрЃА рЃЏрЃЮрЃЏрЃ«рЃЏрЃљрЃарЃћрЃЉрЃџрЃўрЃА рЃЏрЃўрЃћрЃа рЃерЃћрЃДрЃЋрЃљрЃюрЃўрЃџрЃў рЃўрЃюрЃцрЃЮрЃарЃЏрЃљрЃфрЃўрЃўрЃА рЃерЃћрЃЏрЃЮрЃгрЃЏрЃћрЃЉрЃљ. рЃћрЃА рЃўрЃЏрЃўрЃбрЃЮрЃЏ, рЃарЃЮрЃЏ `Buffer Overflow` рЃерЃћрЃбрЃћрЃЋрЃћрЃЉрЃў рЃљрЃЋрЃўрЃарЃўрЃЊрЃЮ рЃЌрЃљрЃЋрЃўрЃЊрЃљрЃю.
```
          Malicious shellcode/asm instructions
                           Рћѓ                  
    Input buffer  EIP      Рћѓ                  
         Рћѓ         Рћѓ       Рћѓ                  
         Рќ╝         Рћѓ       Рћѓ                  
РћїРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљРќ╝       Рќ╝                  
РћѓРќѕРќѕРќѕРќѕРќѕРќѕРќѕРќѕРќѕРќѕРќѕРќѕРќѕРќѕРќѕРќѕРќѕРќѕРќѕРќѕРќѕРќѕРќѕРќѕРќѕРќѕРќѕРќѕРќѕРќѕРќѕРќѕРќѕРќѕ...        
РћћРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў                           
                   Рќ▓                          
                   Рћѓ                          
             Overflowed data                  
```

> **­ЪЊ░ рЃАрЃљрЃўрЃюрЃбрЃћрЃарЃћрЃАрЃЮ рЃцрЃљрЃЦрЃбрЃў:**
> 
> `EIP` рЃљрЃарЃўрЃА `32 bit` CPU register, рЃарЃЮрЃЏрЃћрЃџрЃўрЃф рЃўрЃерЃўрЃцрЃарЃћрЃЉрЃљ рЃарЃЮрЃњрЃЮрЃарЃф `Instruction Pointer`. рЃћрЃА рЃарЃћрЃњрЃўрЃАрЃбрЃарЃљрЃбрЃЮрЃарЃў рЃўрЃЏ `asm` рЃўрЃюрЃАрЃбрЃарЃБрЃЦрЃфрЃўрЃљрЃќрЃћ(рЃљрЃюрЃБ рЃЏрЃљрЃюрЃЦрЃљрЃюрЃБрЃарЃў рЃЎрЃЮрЃЊрЃўрЃА `nugget`-рЃќрЃћ) рЃЏрЃўрЃБрЃЌрЃўрЃЌрЃћрЃЉрЃА, рЃарЃЮрЃЏрЃћрЃџрЃўрЃф рЃБрЃюрЃЊрЃљ рЃерЃћрЃАрЃарЃБрЃџрЃЊрЃћрЃА. рЃљрЃюрЃБ, рЃњрЃљрЃЏрЃЮрЃЊрЃўрЃА, рЃарЃЮрЃЏ рЃЌрЃБ рЃЏрЃЮрЃЏрЃ«рЃЏрЃљрЃарЃћрЃЉрЃџрЃўрЃА рЃЏрЃўрЃћрЃа рЃерЃћрЃДрЃЋрЃљрЃюрЃўрЃџ рЃЎрЃЮрЃЊрЃА рЃАрЃгрЃЮрЃарЃљрЃЊ рЃљрЃа рЃЏрЃЮрЃЋрЃћрЃЦрЃфрЃћрЃЋрЃў, рЃерЃћрЃАрЃљрЃФрЃџрЃЮрЃљ `Buffer overflow` рЃњрЃљрЃЏрЃЮрЃЋрЃўрЃгрЃЋрЃўрЃЮ, рЃарЃљрЃЏрЃљрЃф рЃерЃћрЃАрЃљрЃФрЃџрЃЮрЃљ рЃЎрЃЮрЃЊрЃерЃў рЃЉрЃЮрЃарЃЮрЃбрЃў `shellcode`-рЃўрЃА рЃўрЃюрЃћрЃЦрЃфрЃўрЃљ рЃњрЃљрЃЏрЃЮрЃўрЃгрЃЋрЃўрЃЮрЃА.

```cpp
while(true == true){
	char input_buffer[MESSAGE_SIZE];
	wclear(message_window);
	wrefresh(message_window);

	wgetstr(message_window, input_buffer);

	if(strlen(input_buffer) > MESSAGE_SIZE){
		continue;
	}

	wrefresh(chat_window);
}
```

рЃљрЃАрЃћ рЃњрЃљрЃЏрЃЮрЃўрЃДрЃБрЃарЃћрЃЉрЃљ рЃЎрЃЮрЃЊрЃў. рЃарЃљ рЃЌрЃЦрЃЏрЃљ рЃБрЃюрЃЊрЃљ, рЃЋрЃљрЃЏрЃЮрЃгрЃЏрЃћрЃЉ рЃљрЃарЃўрЃА рЃЌрЃБ рЃљрЃарЃљ `input_buffer`-рЃерЃў рЃЕрЃљрЃгрЃћрЃарЃўрЃџрЃў рЃўрЃюрЃцрЃЮрЃарЃЏрЃљрЃфрЃўрЃљ `MESSAGE_SIZE` рЃЏрЃљрЃЎрЃарЃЮрЃќрЃћ рЃЏрЃћрЃбрЃў(`#define MESSAGE_SIZE 1024`).

## Pointer рЃърЃарЃЮрЃЉрЃџрЃћрЃЏрЃћрЃЉрЃў

рЃЏрЃЮрЃЎрЃџрЃћрЃЊ рЃЉрЃћрЃЋрЃарЃА рЃљрЃгрЃБрЃ«рЃћрЃЉрЃА `pointer`-рЃћрЃЉрЃў, рЃЏрЃљрЃњрЃарЃљрЃЏ рЃўрЃЊрЃћрЃљрЃерЃў рЃљрЃарЃф рЃўрЃАрЃћ рЃарЃЌрЃБрЃџрЃў рЃбрЃЮрЃърЃўрЃЎрЃўрЃљ. рЃърЃЮрЃўрЃюрЃбрЃћрЃарЃў рЃБрЃЉрЃарЃљрЃџрЃЮ рЃфрЃЋрЃџрЃљрЃЊрЃўрЃљ, рЃарЃЮрЃЏрЃћрЃџрЃўрЃф рЃАрЃ«рЃЋрЃљ рЃфрЃЋрЃџрЃљрЃЊрЃўрЃА рЃЏрЃћрЃ«рЃўрЃАрЃћрЃарЃћрЃЉрЃўрЃА рЃЏрЃўрЃАрЃљрЃЏрЃљрЃарЃЌрЃА рЃўрЃЎрЃљрЃЋрЃћрЃЉрЃА. рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃљрЃЊ:
```cpp
int x = 10;
int* x_ptr = &x;
```

рЃљрЃЏрЃўрЃА рЃњрЃљрЃЏрЃЮ, рЃљрЃАрЃћрЃЌрЃў рЃарЃљрЃЏ рЃ«рЃЊрЃћрЃЉрЃљ:
```
                          Random Access Memory                                
                                   Рћѓ                                          
                                   Рћѓ                                          
                                   Рћѓ                                          
                                   Рћѓ                                          
      РћїРћђРћђРћђРћђРћђРћђРћђРћђРћљ                   Рћѓ                                          
      Рћѓ        Рћѓ                   Рћѓ                                          
      Рћѓ        Рћѓ                   Рќ╝                                          
РћїРћђРћђРћђРћгРћђРќ╝РћђРћгРћђРћђРћђРћђРћгРћђРћ╝РћђРћгРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћљ
Рћѓ   Рћѓ   Рћѓ    Рћѓ Рћѓ Рћѓ                                                           Рћѓ
Рћѓ   Рћѓ1 0Рћѓ    Рћѓ Рћѓ Рћѓ                                                           Рћѓ
Рћѓ   Рћѓ   Рћѓ    Рћѓ   Рћѓ                                                           Рћѓ
Рћѓ   РћюРћђРћђРћђРћц    РћюРћђРћђРћђРћц                                                           Рћѓ
Рћѓ   Рћѓ x Рћѓ    Рћѓ y Рћѓ                                                           Рћѓ
РћћРћђРћђРћђРћ┤РћђРћђРћђРћ┤РћђРћђРћђРћђРћ┤РћђРћђРћђРћ┤РћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћђРћў
```

рЃљрЃЦ рЃўрЃА рЃърЃарЃЮрЃЉрЃџрЃћрЃЏрЃљ рЃўрЃЦрЃЏрЃюрЃћрЃЉрЃљ, рЃарЃЮрЃЏ рЃарЃЮрЃЊрЃћрЃАрЃљрЃф `WINDOW*` рЃфрЃЋрЃџрЃљрЃЊрЃћрЃЉрЃў рЃњрЃљрЃЊрЃљрЃЋрЃћрЃфрЃў `CreateScreen();` рЃЊрЃљ `DeleteScreen();` рЃцрЃБрЃюрЃЦрЃфрЃўрЃћрЃЉрЃА, рЃЏрЃљрЃЌ рЃЏрЃўрЃћрЃа рЃЊрЃљрЃърЃарЃЮрЃфрЃћрЃАрЃћрЃЉрЃБрЃџрЃў рЃфрЃЋрЃџрЃљрЃЊрЃћрЃЉрЃўрЃА рЃфрЃЋрЃџрЃўрЃџрЃћрЃЉрЃљ рЃљрЃа рЃљрЃўрЃАрЃљрЃ«рЃљ `main();` рЃцрЃБрЃюрЃЦрЃфрЃўрЃљрЃерЃў рЃЊрЃљ `Segmentation fault(core dumped)` рЃЊрЃљрЃЏрЃўрЃгрЃћрЃарЃљ рЃбрЃћрЃарЃЏрЃўрЃюрЃљрЃџрЃерЃў. рЃљрЃЏ рЃърЃарЃЮрЃЉрЃџрЃћрЃЏрЃўрЃА рЃЏрЃЮрЃАрЃљрЃњрЃЋрЃљрЃарЃћрЃЉрЃџрЃљрЃЊ, рЃљрЃЏ рЃЮрЃарЃў рЃцрЃБрЃюрЃЦрЃфрЃўрЃўрЃА рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃћрЃЉрЃерЃў, `WINDOW**` рЃњрЃљрЃ«рЃЊрЃћрЃЉрЃљ рЃДрЃЋрЃћрЃџрЃљ рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃў, рЃ«рЃЮрЃџрЃЮ рЃцрЃБрЃюрЃЦрЃфрЃўрЃћрЃЉрЃА рЃўрЃАрЃўрЃюрЃў рЃљрЃАрЃћ рЃњрЃљрЃЊрЃљрЃћрЃфрЃћрЃЏрЃўрЃљрЃю: `&client_window`. рЃљрЃАрЃћрЃЋрЃћ, рЃцрЃБрЃюрЃЦрЃфрЃўрЃћрЃЉрЃерЃў рЃЏрЃљрЃЌрЃў рЃњрЃљрЃЏрЃЮрЃДрЃћрЃюрЃћрЃЉрЃўрЃАрЃљрЃА, рЃЏрЃљрЃЌ рЃгрЃўрЃю `*` рЃћрЃЦрЃюрЃћрЃЉрЃљрЃЌ рЃЊрЃљрЃарЃЌрЃБрЃџрЃў: `*client_window`.

рЃАрЃљрЃЉрЃЮрЃџрЃЮрЃЮ рЃ»рЃљрЃЏрЃерЃў, рЃЎрЃЮрЃЊрЃў рЃљрЃАрЃћрЃЌрЃў рЃњрЃљрЃЏрЃЮрЃЋрЃўрЃЊрЃљ:
```cpp
int CreateScreen(WINDOW** chat_window, WINDOW** message_window, WINDOW** users_window){
    initscr();
    echo();
    keypad(stdscr, TRUE);

    int screen_height, screen_width;
    getmaxyx(stdscr, screen_height, screen_width);
    start_color();
    init_pair(1, COLOR_WHITE, COLOR_BLUE);

    int chat_window_height = screen_height - 3;

    *chat_window = newwin(chat_window_height, screen_width, 0, 0);
    *message_window = newwin(1, screen_width, screen_height - 2, 0);
    *users_window = newwin(1, screen_width, screen_height - 1, 0);

    wbkgd(*chat_window, COLOR_PAIR(1));
    wbkgd(*message_window, COLOR_PAIR(1));
    wbkgd(*users_window, COLOR_PAIR(1));

    // Draw borders around windows
    wborder(*chat_window, '|', '|', '-', '-', '+', '+', '+', '+');
    wborder(*message_window, '|', '|', '-', '-', '+', '+', '+', '+');
    wborder(*users_window, '|', '|', '-', '-', '+', '+', '+', '+');

    return 0;
}

int DeleteScreen(WINDOW** chat_window, WINDOW** message_window, WINDOW** users_window){
    int screen_height, screen_width;
    getmaxyx(stdscr, screen_height, screen_width);

    int chat_window_height = screen_height - 3;

    delwin(*chat_window);
    delwin(*message_window);
    delwin(*users_window);

    endwin();

    return 0;
}
```

![1.gif](https:///44b4c0.github.io/assets/img/posts/4/1.gif)

рЃ«рЃЮ, `.gif` рЃцрЃљрЃўрЃџрЃў рЃфрЃЮрЃбрЃљ рЃфрЃБрЃЊ рЃ«рЃљрЃарЃўрЃАрЃ«рЃерЃўрЃљ(рЃљрЃа рЃЋрЃўрЃфрЃў рЃарЃљрЃбрЃЮрЃЏ), рЃЏрЃљрЃњрЃарЃљрЃЏ рЃљрЃарЃљрЃБрЃерЃљрЃЋрЃА. рЃћрЃА рЃБрЃЉрЃарЃљрЃџрЃЮ рЃЊрЃћрЃЏрЃЮрЃюрЃАрЃбрЃарЃљрЃфрЃўрЃљрЃљ рЃўрЃЏрЃўрЃА рЃЌрЃБ рЃарЃљ рЃ«рЃЊрЃћрЃЉрЃљ, рЃарЃЮрЃЊрЃћрЃАрЃљрЃф рЃЎрЃџрЃўрЃћрЃюрЃбрЃў рЃўрЃарЃЌрЃЋрЃћрЃЉрЃљ. рЃарЃЮрЃЊрЃћрЃАрЃљрЃф рЃЎрЃџрЃўрЃћрЃюрЃбрЃў рЃљрЃЏрЃБрЃерЃљрЃЋрЃЊрЃћрЃЉрЃљ, рЃњрЃљрЃЏрЃЮрЃЕрЃюрЃЊрЃћрЃЉрЃљ рЃгрЃљрЃарЃгрЃћрЃарЃљ, рЃАрЃљрЃЊрЃљрЃф рЃЎрЃџрЃўрЃћрЃюрЃбрЃў рЃърЃарЃЮрЃњрЃарЃљрЃЏрЃўрЃА рЃерЃћрЃАрЃљрЃ«рЃћрЃЉ рЃерЃћрЃАрЃљрЃЉрЃљрЃЏрЃўрЃА рЃўрЃюрЃцрЃЮрЃарЃЏрЃљрЃфрЃўрЃљрЃА рЃњрЃљрЃўрЃњрЃћрЃЉрЃА. рЃцрЃћрЃарЃћрЃЉрЃўрЃф рЃерЃћрЃАрЃљрЃфрЃЋрЃџрЃћрЃџрЃўрЃљ рЃЕрЃљрЃбрЃўрЃАрЃЌрЃЋрЃўрЃА. рЃерЃћрЃАрЃљрЃФрЃџрЃЮрЃљ `theme`-рЃћрЃЉрЃўрЃф рЃЊрЃљрЃЋрЃљрЃЏрЃљрЃбрЃЮ. рЃћрЃА рЃЏрЃЮрЃњрЃЋрЃўрЃљрЃюрЃћрЃЉрЃўрЃЌ. рЃљрЃ«рЃџрЃљ рЃЏрЃЌрЃљрЃЋрЃљрЃарЃўрЃљ рЃцрЃљрЃюрЃ»рЃарЃћрЃЉрЃў рЃљрЃЋрЃљрЃгрЃДрЃЮ.

## рЃЊрЃўрЃюрЃљрЃЏрЃўрЃБрЃарЃў рЃарЃћрЃќрЃЮрЃџрЃБрЃфрЃўрЃљ

рЃарЃљ рЃЌрЃЦрЃЏрЃљ рЃБрЃюрЃЊрЃљ, рЃАрЃљрЃГрЃўрЃарЃЮрЃљ рЃЊрЃўрЃюрЃљрЃЏрЃўрЃБрЃарЃў рЃарЃћрЃќрЃЮрЃџрЃБрЃфрЃўрЃўрЃА рЃЦрЃЮрЃюрЃљ. рЃћрЃА рЃърЃарЃЮрЃЉрЃџрЃћрЃЏрЃљ рЃАрЃБрЃџ рЃљрЃ«рЃџрЃљрЃ«рЃљрЃюрЃА рЃљрЃдрЃЏрЃЮрЃЋрЃљрЃЕрЃюрЃўрЃћ. рЃњрЃљрЃЏрЃЮрЃЊрЃўрЃА, рЃарЃЮрЃЏ рЃарЃЮрЃЊрЃћрЃАрЃљрЃф рЃбрЃћрЃарЃЏрЃўрЃюрЃљрЃџрЃўрЃА рЃцрЃљрЃюрЃ»рЃарЃўрЃА рЃќрЃЮрЃЏрЃљрЃА рЃЋрЃфрЃЋрЃџрЃў, `client`-рЃўрЃА рЃерЃўрЃЊрЃљ рЃцрЃљрЃюрЃ»рЃарЃћрЃЉрЃў рЃўрЃарЃћрЃЋрЃљ. рЃЏрЃўрЃюрЃЊрЃљ рЃўрЃАрЃћ рЃўрЃДрЃЮрЃА рЃДрЃЋрЃћрЃџрЃљрЃцрЃћрЃарЃў, рЃарЃЮрЃЏ рЃарЃЮрЃЊрЃћрЃАрЃљрЃф рЃбрЃћрЃарЃЏрЃўрЃюрЃљрЃџрЃўрЃА рЃцрЃљрЃюрЃ»рЃљрЃарЃљ рЃњрЃљрЃўрЃќрЃарЃЊрЃћрЃЉрЃљ/рЃЊрЃљрЃърЃљрЃбрЃљрЃарЃљрЃЋрЃЊрЃћрЃЉрЃљ, `client` рЃЕрЃЋрЃћрЃБрЃџрЃћрЃЉрЃарЃўрЃЋрЃљрЃЊ рЃљрЃ░рЃДрЃЋрЃћрЃА рЃарЃћрЃќрЃЮрЃџрЃБрЃфрЃўрЃўрЃА рЃЊрЃўрЃюрЃљрЃЏрЃўрЃБрЃа рЃфрЃЋрЃџрЃўрЃџрЃћрЃЉрЃљрЃА.

рЃљрЃЏрЃўрЃА рЃњрЃљрЃЎрЃћрЃЌрЃћрЃЉрЃљрЃА `signal`-рЃўрЃЌ рЃерЃћрЃЋрЃФрЃџрЃћрЃЉ. `<signal.h>` рЃЉрЃўрЃЉрЃџрЃўрЃЮрЃЌрЃћрЃЎрЃљрЃљ рЃљрЃЏрЃўрЃАрЃљрЃЌрЃЋрЃўрЃА рЃАрЃљрЃГрЃўрЃарЃЮ. рЃерЃћрЃЏрЃЊрЃћрЃњ, рЃерЃћрЃЏрЃўрЃФрЃџрЃўрЃљ рЃљрЃЋрЃўрЃдрЃЮ рЃюрЃћрЃЉрЃўрЃАрЃЏрЃўрЃћрЃарЃў рЃцрЃБрЃюрЃЦрЃфрЃўрЃљ, рЃЊрЃљ рЃАрЃўрЃњрЃюрЃљрЃџрЃА рЃњрЃљрЃЊрЃљрЃЋрЃфрЃћ рЃўрЃА. рЃљрЃАрЃћрЃЋрЃћ, рЃерЃћрЃЏрЃўрЃФрЃџрЃўрЃљ рЃЏрЃўрЃЋрЃБрЃЌрЃўрЃЌрЃЮ рЃЌрЃБ рЃарЃљ рЃБрЃюрЃЊрЃљ рЃўрЃДрЃЮрЃА рЃАрЃўрЃњрЃюрЃљрЃџрЃў. рЃљрЃЏ рЃерЃћрЃЏрЃЌрЃ«рЃЋрЃћрЃЋрЃљрЃерЃў, рЃАрЃўрЃњрЃюрЃљрЃџрЃў рЃцрЃљрЃюрЃ»рЃарЃўрЃА рЃќрЃЮрЃЏрЃўрЃА рЃерЃћрЃфрЃЋрЃџрЃљ рЃўрЃЦрЃюрЃћрЃЉрЃљ:
```cpp
signal(SIGWINCH, HandleGlobalResize);
```

рЃ«рЃЮрЃџрЃЮ, `HandleGlobalResize` рЃцрЃБрЃюрЃЦрЃфрЃўрЃљ рЃўрЃЦрЃюрЃћрЃЉрЃљ рЃћрЃА:
```cpp
void HandleGlobalResize(int resize_signal){
    endwin();

    clear();
    refresh();

    start_color();
    init_pair(1, COLOR_WHITE, COLOR_BLUE);

    int screen_height, screen_width;
    getmaxyx(stdscr, screen_height, screen_width);

    int chat_window_height = screen_height - 3;
    chat_window = newwin(chat_window_height, screen_width, 0, 0);
    message_window = newwin(1, screen_width, screen_height - 2, 0);
}
```

рЃљрЃЏрЃўрЃА рЃњрЃљрЃЏрЃЮ, рЃњрЃљрЃарЃЎрЃЋрЃћрЃБрЃџрЃў рЃфрЃЋрЃџрЃљрЃЊрЃћрЃЉрЃўрЃА `main();` рЃцрЃБрЃюрЃЦрЃфрЃўрЃўрЃЊрЃљрЃю рЃњрЃљрЃЏрЃЮрЃбрЃљрЃюрЃљ рЃЊрЃљ рЃЏрЃљрЃЌрЃў `client.hpp` рЃцрЃљрЃўрЃџрЃерЃў рЃЕрЃљрЃАрЃЏрЃљ рЃЊрЃљрЃЏрЃГрЃўрЃарЃЊрЃљ. рЃЏрЃљрЃњрЃљрЃџрЃўрЃЌрЃљрЃЊ, рЃцрЃљрЃюрЃ»рЃарЃўрЃА рЃърЃЮрЃўрЃюрЃбрЃћрЃарЃћрЃЉрЃўрЃА:
```cpp
WINDOW* chat_window;
WINDOW* message_window;
```

рЃарЃљрЃЏрЃЊрЃћрЃюрЃ»рЃћрЃарЃЏрЃћ рЃЊрЃљрЃЏрЃГрЃўрЃарЃЊрЃљ рЃбрЃћрЃАрЃбрЃўрЃарЃћрЃЉрЃўрЃА рЃЕрЃљрЃбрЃљрЃарЃћрЃЉрЃљ рЃЊрЃљ рЃАрЃљрЃЉрЃЮрЃџрЃЮрЃЮрЃЊ, рЃАрЃўрЃњрЃюрЃљрЃџрЃў рЃњрЃљрЃЏрЃљрЃарЃЌрЃБрЃџрЃљрЃЊ рЃЏрЃБрЃерЃљрЃЮрЃЉрЃА. рЃЊрЃўрЃюрЃљрЃЏрЃўрЃБрЃарЃў рЃарЃћрЃќрЃЮрЃџрЃБрЃфрЃўрЃљ рЃљрЃЋрЃљрЃгрЃДрЃћ. рЃАрЃљрЃЉрЃЮрЃџрЃЮрЃЮрЃЊ, рЃљрЃАрЃћрЃЌрЃў рЃЎрЃЮрЃЊрЃў рЃЏрЃўрЃЋрЃўрЃдрЃћ:

`client.cpp:`
```cpp
#include <stdio.h>
#include <stdlib.h>

#include <sys/socket.h>
#include <sys/types.h>
#include <arpa/inet.h>

#include <string.h>

#include <thread>
#include <vector>

#include "client.hpp"

int main(){
    int client_socket;
    sockaddr_in server_address;

    SSL_library_init();
    OpenSSL_add_all_algorithms();

    const SSL_METHOD* ssl_method = SSLv23_client_method();
    SSL_CTX* ssl_context = SSL_CTX_new(ssl_method);

    if(!ssl_context){
        return 1;
    }

    signal(SIGWINCH, HandleGlobalResize);

    int screen_init_res = CreateScreen(&chat_window, &message_window);

    if(screen_init_res != 0){
        return 1;
    }

    while(true == true){
        char input_buffer[MESSAGE_SIZE];
        wclear(message_window);
        wrefresh(message_window);

        wgetstr(message_window, input_buffer);

        if(strlen(input_buffer) > MESSAGE_SIZE){
            continue;
        }

        wrefresh(chat_window);
    }

    int screen_del_res = DeleteScreen(&chat_window, &message_window);

    return 0;
}
```

`client.hpp:`
```cpp
#pragma once

#include <ncurses.h>
#include <signal.h>
#include <openssl/ssl.h>

/* Communication config */
#define MESSAGE_SIZE 1024

WINDOW* chat_window;
WINDOW* message_window;

int CreateScreen(WINDOW** chat_window, WINDOW** message_window){
    initscr();
    echo();
    keypad(stdscr, TRUE);

    int screen_height, screen_width;
    getmaxyx(stdscr, screen_height, screen_width);
    start_color();
    init_pair(1, COLOR_WHITE, COLOR_BLUE);

    int chat_window_height = screen_height - 3;

    *chat_window = newwin(chat_window_height, screen_width, 0, 0);
    *message_window = newwin(1, screen_width, screen_height - 2, 0);

    wbkgd(*message_window, COLOR_PAIR(1));

    return 0;
}

int DeleteScreen(WINDOW** chat_window, WINDOW** message_window){
    int screen_height, screen_width;
    getmaxyx(stdscr, screen_height, screen_width);

    int chat_window_height = screen_height - 3;

    delwin(*chat_window);
    delwin(*message_window);

    endwin();

    return 0;
}

void HandleGlobalResize(int resize_signal){
    endwin();

    // clear();
    refresh();

    start_color();
    init_pair(1, COLOR_WHITE, COLOR_BLUE);

    int screen_height, screen_width;
    getmaxyx(stdscr, screen_height, screen_width);

    int chat_window_height = screen_height - 3;
    chat_window = newwin(chat_window_height, screen_width, 0, 0);
    message_window = newwin(1, screen_width, screen_height - 2, 0);

    wbkgd(message_window, COLOR_PAIR(1));
    refresh();
}

int ReadFromServer(WINDOW* chat_window, int client_socket){
    while(true == true){

    }

    return 0;
}
```
